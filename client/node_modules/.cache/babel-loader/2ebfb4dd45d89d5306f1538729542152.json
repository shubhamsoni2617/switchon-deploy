{"ast":null,"code":"import _regeneratorRuntime from\"/home/shubh/switchon/switchon-server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/shubh/switchon/switchon-server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/shubh/switchon/switchon-server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import makeToast from\"../../../Toaster\";import\"../style.css\";import{Link,useHistory}from\"react-router-dom\";import io from\"socket.io-client\";import LoaderModal from\"../../../loader-modal/LoaderModal\";import{Axios}from\"../../../utils\";var SignupPage=function SignupPage(_ref){var socket=_ref.socket;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUserName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"Department 1\"),_useState8=_slicedToArray(_useState7,2),department=_useState8[0],setDepartment=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var history=useHistory();var registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return Axios.post(\"/register\",{username:username,email:email,password:password,department:department});case 4:response=_context.sent;io(\"http://localhost:8000\",{query:{username:username,department:department,approverId:response.data.approverId}});setLoading(false);makeToast(\"success\",response.data.message);history.push(\"/login\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);if(_context.t0&&_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message){setLoading(false);makeToast(\"error\",_context.t0.response.data.message);}case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function registerUser(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(LoaderModal,{isLoading:loading}),/*#__PURE__*/React.createElement(\"div\",{className:\"cardHeader\"},\"Singup\"),/*#__PURE__*/React.createElement(\"div\",{className:\"cardBody\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inputGroup\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Username\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",id:\"name\",placeholder:\"John Doe\",value:username,onChange:function onChange(_ref3){var target=_ref3.target;return setUserName(target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"inputGroup\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",id:\"email\",placeholder:\"abc@example.com\",value:email,onChange:function onChange(_ref4){var target=_ref4.target;return setEmail(target.value);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"inputGroup\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",id:\"password\",placeholder:\"Your Password\",value:password,onChange:function onChange(_ref5){var target=_ref5.target;return setPassword(target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"inputGroup\"},/*#__PURE__*/React.createElement(\"p\",{className:\"department-label\",htmlFor:\"department\"},\"Department\"),/*#__PURE__*/React.createElement(\"select\",{value:department,placeholder:\"select\",onChange:function onChange(_ref6){var target=_ref6.target;return setDepartment(target.value);}},[\"Department 1\",\"Department 2\"].map(function(dep){return/*#__PURE__*/React.createElement(\"option\",{key:dep,value:dep},dep);}))),/*#__PURE__*/React.createElement(\"button\",{onClick:registerUser},\"Register\"),/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"Login Instead\"));};export default SignupPage;","map":{"version":3,"sources":["/home/shubh/switchon/switchon-server/client/src/Pages/authentication/signup-page/index.js"],"names":["React","useState","makeToast","Link","useHistory","io","LoaderModal","Axios","SignupPage","socket","username","setUserName","email","setEmail","password","setPassword","department","setDepartment","loading","setLoading","history","registerUser","post","response","query","approverId","data","message","push","target","value","map","dep"],"mappings":"meAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,MAAO,cAAP,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,eACDR,QAAQ,CAAC,EAAD,CADP,wCAC1BS,QAD0B,eAChBC,WADgB,8BAEPV,QAAQ,CAAC,EAAD,CAFD,yCAE1BW,KAF0B,eAEnBC,QAFmB,8BAGDZ,QAAQ,CAAC,EAAD,CAHP,yCAG1Ba,QAH0B,eAGhBC,WAHgB,8BAIGd,QAAQ,CAAC,cAAD,CAJX,yCAI1Be,UAJ0B,eAIdC,aAJc,8BAKHhB,QAAQ,CAAC,KAAD,CALL,0CAK1BiB,OAL0B,gBAKjBC,UALiB,gBAMjC,GAAMC,CAAAA,OAAO,CAAGhB,UAAU,EAA1B,CAEA,GAAMiB,CAAAA,YAAY,2FAAG,gKAEjBF,UAAU,CAAC,IAAD,CAAV,CAFiB,sBAGMZ,CAAAA,KAAK,CAACe,IAAN,CAAW,WAAX,CAAwB,CAC7CZ,QAAQ,CAARA,QAD6C,CAE7CE,KAAK,CAALA,KAF6C,CAG7CE,QAAQ,CAARA,QAH6C,CAI7CE,UAAU,CAAVA,UAJ6C,CAAxB,CAHN,QAGXO,QAHW,eASjBlB,EAAE,CAAC,uBAAD,CAA0B,CAC1BmB,KAAK,CAAE,CACLd,QAAQ,CAARA,QADK,CAELM,UAAU,CAAVA,UAFK,CAGLS,UAAU,CAAEF,QAAQ,CAACG,IAAT,CAAcD,UAHrB,CADmB,CAA1B,CAAF,CAOAN,UAAU,CAAC,KAAD,CAAV,CACAjB,SAAS,CAAC,SAAD,CAAYqB,QAAQ,CAACG,IAAT,CAAcC,OAA1B,CAAT,CACAP,OAAO,CAACQ,IAAR,CAAa,QAAb,EAlBiB,iFAoBjB,GACE,aACA,YAAIL,QADJ,EAEA,YAAIA,QAAJ,CAAaG,IAFb,EAGA,YAAIH,QAAJ,CAAaG,IAAb,CAAkBC,OAJpB,CAKE,CACAR,UAAU,CAAC,KAAD,CAAV,CAEAjB,SAAS,CAAC,OAAD,CAAU,YAAIqB,QAAJ,CAAaG,IAAb,CAAkBC,OAA5B,CAAT,CACD,CA7BgB,qEAAH,kBAAZN,CAAAA,YAAY,2CAAlB,CAiCA,mBACE,2BAAK,SAAS,CAAC,MAAf,eACE,oBAAC,WAAD,EAAa,SAAS,CAAEH,OAAxB,EADF,cAEE,2BAAK,SAAS,CAAC,YAAf,WAFF,cAGE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,OAAO,CAAC,MAAf,aADF,cAEE,6BACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,MAFP,CAGE,EAAE,CAAC,MAHL,CAIE,WAAW,CAAC,UAJd,CAKE,KAAK,CAAER,QALT,CAME,QAAQ,CAAE,4BAAGmB,CAAAA,MAAH,OAAGA,MAAH,OAAgBlB,CAAAA,WAAW,CAACkB,MAAM,CAACC,KAAR,CAA3B,EANZ,EAFF,CADF,cAYE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,OAAO,CAAC,OAAf,UADF,cAEE,6BACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,OAFP,CAGE,EAAE,CAAC,OAHL,CAIE,WAAW,CAAC,iBAJd,CAKE,KAAK,CAAElB,KALT,CAME,QAAQ,CAAE,4BAAGiB,CAAAA,MAAH,OAAGA,MAAH,OAAgBhB,CAAAA,QAAQ,CAACgB,MAAM,CAACC,KAAR,CAAxB,EANZ,EAFF,CAZF,CAHF,cA2BE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,OAAO,CAAC,UAAf,aADF,cAEE,6BACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,WAAW,CAAC,eAJd,CAKE,KAAK,CAAEhB,QALT,CAME,QAAQ,CAAE,4BAAGe,CAAAA,MAAH,OAAGA,MAAH,OAAgBd,CAAAA,WAAW,CAACc,MAAM,CAACC,KAAR,CAA3B,EANZ,EAFF,CA3BF,cAuCE,2BAAK,SAAS,CAAC,YAAf,eACE,yBAAG,SAAS,CAAC,kBAAb,CAAgC,OAAO,CAAC,YAAxC,eADF,cAIE,8BACE,KAAK,CAAEd,UADT,CAEE,WAAW,CAAC,QAFd,CAGE,QAAQ,CAAE,4BAAGa,CAAAA,MAAH,OAAGA,MAAH,OAAgBZ,CAAAA,aAAa,CAACY,MAAM,CAACC,KAAR,CAA7B,EAHZ,EAKG,CAAC,cAAD,CAAiB,cAAjB,EAAiCC,GAAjC,CAAqC,SAACC,GAAD,qBACpC,8BAAQ,GAAG,CAAEA,GAAb,CAAkB,KAAK,CAAEA,GAAzB,EACGA,GADH,CADoC,EAArC,CALH,CAJF,CAvCF,cAuDE,8BAAQ,OAAO,CAAEX,YAAjB,aAvDF,cAwDE,oBAAC,IAAD,EAAM,EAAE,CAAC,QAAT,kBAxDF,CADF,CA4DD,CArGD,CAuGA,cAAeb,CAAAA,UAAf","sourcesContent":["import React, { useState } from \"react\";\nimport makeToast from \"../../../Toaster\";\nimport \"../style.css\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport LoaderModal from \"../../../loader-modal/LoaderModal\";\nimport { Axios } from \"../../../utils\";\n\nconst SignupPage = ({ socket }) => {\n  const [username, setUserName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [department, setDepartment] = useState(\"Department 1\");\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n\n  const registerUser = async () => {\n    try {\n      setLoading(true);\n      const response = await Axios.post(\"/register\", {\n        username,\n        email,\n        password,\n        department,\n      });\n      io(\"http://localhost:8000\", {\n        query: {\n          username,\n          department,\n          approverId: response.data.approverId,\n        },\n      });\n      setLoading(false);\n      makeToast(\"success\", response.data.message);\n      history.push(\"/login\");\n    } catch (err) {\n      if (\n        err &&\n        err.response &&\n        err.response.data &&\n        err.response.data.message\n      ) {\n        setLoading(false);\n\n        makeToast(\"error\", err.response.data.message);\n      }\n    }\n  };\n\n  return (\n    <div className=\"card\">\n      <LoaderModal isLoading={loading} />\n      <div className=\"cardHeader\">Singup</div>\n      <div className=\"cardBody\">\n        <div className=\"inputGroup\">\n          <label htmlFor=\"name\">Username</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            id=\"name\"\n            placeholder=\"John Doe\"\n            value={username}\n            onChange={({ target }) => setUserName(target.value)}\n          />\n        </div>\n        <div className=\"inputGroup\">\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"email\"\n            name=\"email\"\n            id=\"email\"\n            placeholder=\"abc@example.com\"\n            value={email}\n            onChange={({ target }) => setEmail(target.value)}\n          />\n        </div>\n      </div>\n      <div className=\"inputGroup\">\n        <label htmlFor=\"password\">Password</label>\n        <input\n          type=\"password\"\n          name=\"password\"\n          id=\"password\"\n          placeholder=\"Your Password\"\n          value={password}\n          onChange={({ target }) => setPassword(target.value)}\n        />\n      </div>\n\n      <div className=\"inputGroup\">\n        <p className=\"department-label\" htmlFor=\"department\">\n          Department\n        </p>\n        <select\n          value={department}\n          placeholder=\"select\"\n          onChange={({ target }) => setDepartment(target.value)}\n        >\n          {[\"Department 1\", \"Department 2\"].map((dep) => (\n            <option key={dep} value={dep}>\n              {dep}\n            </option>\n          ))}\n        </select>\n      </div>\n      <button onClick={registerUser}>Register</button>\n      <Link to=\"/login\">Login Instead</Link>\n    </div>\n  );\n};\n\nexport default SignupPage;\n"]},"metadata":{},"sourceType":"module"}